{% comment %}
# This file is part of EXMO2010 software.
# Copyright 2010, 2011, 2013 Al Nikolov
# Copyright 2010, 2011 non-profit partnership Institute of Information Freedom Development
# Copyright 2012, 2013 Foundation "Institute for Information Freedom Development"
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
{% endcomment %}
{% load i18n hash static %}

{% spaceless %}
    <!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="{{ LANGUAGE_CODE }}" xml:lang="{{ LANGUAGE_CODE }}">
        <head>
            <title>
                {% trans "Task " %} {{ task.id }}
            </title>
            <link rel="stylesheet" type="text/css" href="{% static 'admin/css/base.css' %}" />
            <link rel="stylesheet" type="text/css" href="{% static 'css/task_report.css' %}" />
        </head>

        <body>
            <h1>{{ task.organization.name }}: {{ task.organization.monitoring.name }}</h1>

            <table>
                <thead>
                    <tr>
                        <td>{% trans 'Code' %}</td>
                        <td>{% trans 'Name' %}</td>
                        <td>{% trans 'Openness' %}</td>
                        <td>{% trans 'Weight' %}</td>
                        <td>{% trans 'Found' %}</td>
                        <td>{% trans 'Complete' %}</td>
                        <td>{% trans 'Topical' %}</td>
                        <td>{% trans 'Accessible' %}</td>
                        <td>{% trans 'HTML' %}</td>
                        <td>{% trans 'Document' %}</td>
                        <td>{% trans 'Image' %}</td>
                    </tr>
                </thead>

                <tbody>
                    {% for parameter in parameters %}
                        {% with score_dict|hash:parameter.pk as score %}
                            <tr>
                                <td>{{ parameter.code }}</td>
                                <td>{{ parameter.name }}</td>
                                {% if score %}
                                    <td>{{ score.openness }}</td>
                                    <td>{{ score.parameter.weight }}</td>
                                    {% include "exmo2010/score_criteria_table.html" %}
                                    {% if report == 'printfull' %}
                                        {% if score.foundComment %}</tr><tr><td>{% trans "explanation for 'Found' criterion" %}</td><td colspan=10>{{ score.foundComment|linebreaks }}</td>{% endif %}
                                        {% if score.completeComment and score.parameter.complete %}</tr><tr><td>{% trans "explanation for 'Complete' criterion" %}</td><td colspan=10>{{ score.completeComment|linebreaks }}</td>{% endif %}
                                        {% if score.topicalComment and score.parameter.topical %}</tr><tr><td>{% trans "explanation for 'Topical' criterion" %}</td><td colspan=10>{{ score.topicalComment|linebreaks }}</td>{% endif %}
                                        {% if score.accessibleComment and score.parameter.accessible %}</tr><tr><td>{% trans "explanation for 'Accessible' criterion" %}</td><td colspan=10>{{ score.accessibleComment|linebreaks }}</td>{% endif %}
                                        {% if score.hypertextComment and score.parameter.hypertext %}</tr><tr><td>{% trans "explanation for 'Hypertext' criterion" %}</td><td colspan=10>{{ score.hypertextComment|linebreaks }}</td>{% endif %}
                                        {% if score.documentComment and score.parameter.document %}</tr><tr><td>{% trans "explanation for 'Document' criterion" %}</td><td colspan=10>{{ score.documentComment|linebreaks }}</td>{% endif %}
                                        {% if score.imageComment and score.parameter.image %}</tr><tr><td>{% trans "explanation for 'Image' criterion" %}</td><td colspan=10>{{ score.imageComment|linebreaks }}</td>{% endif %}
                                        {% if score.comment %}</tr><tr><td>{% trans 'recommendations' %}</td><td colspan=10>{{ score.comment|linebreaks }}</td>{% endif %}
                                    {% endif %}
                                {%else%}
                                    <td colspan=10></td>
                                {%endif%}
                            </tr>
                        {% endwith %}
                    {% endfor %}
                </tbody>
            </table>
        </body>
        <br>
        {% block footer %}
            {% include "exmo2010/footer.html" %}
        {% endblock %}
    </html>
{% endspaceless %}
